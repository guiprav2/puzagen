{"index.html":"<!DOCTYPE html><html><head><script>// Copyright 2019-2024 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\n\n// taken from https://github.com/thedodd/trunk/blob/5c799dc35f1f1d8f8d3d30c8723cbb761a9b6a08/src/autoreload.js\n\n;(function () {\n  const reload_url = 'ws://127.0.0.1:1430/__tauri_cli'\n  const url = reload_url ? reload_url : window.location.href\n  const poll_interval = 5000\n  const reload_upon_connect = () => {\n    window.setTimeout(() => {\n      // when we successfully reconnect, we'll force a\n      // reload (since we presumably lost connection to\n      // tauri-cli due to it being killed)\n      const ws = new WebSocket(url)\n      ws.onopen = () => window.location.reload()\n      ws.onclose = reload_upon_connect\n    }, poll_interval)\n  }\n\n  const ws = new WebSocket(url)\n  ws.onmessage = (ev) => {\n    const msg = JSON.parse(ev.data)\n    if (msg.reload) {\n      window.location.reload()\n    }\n  }\n  ws.onclose = reload_upon_connect\n})()\n</script>\n    <meta charset=\"utf-8\">\n    <title>webfoundry57</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n    <style>\n    [data-tauri-drag-region] {\n      app-region: drag;\n    }\n    </style>\n  </head>\n  <body class=\"flex flex-col [&amp;>div:first-child]:flex-1 min-h-screen\">\n    <script type=\"module\">\n      (async () => {\n        window.rootPrefix = /^\\/(files|preview)\\//.test(location.pathname) ? location.pathname.split('/').slice(0, 4).join('/') : '/';\n        if (rootPrefix === '/' || rootPrefix === '/collab.html') rootPrefix = '.';\n        let wforigin = new URL(location.href).searchParams.get('isolate') || location.origin;\n        if (/^(\\w+\\.)?(webfoundry.app|webfoundry\\d+\\.netlify\\.app|localhost)$/.test(wforigin)) throw new Error(`Bad isolation origin`);\n        if (new URL(location.href).searchParams.get('isolate') != null) {\n          await navigator.serviceWorker.register('/sw.js');\n          await navigator.serviceWorker.ready;\n          if (!navigator.serviceWorker.controller) return location.reload();\n          let parts = location.pathname.slice(1).split('/');\n          let tabId = parts[1];\n          window.wfThisProject = parts[2];\n          navigator.serviceWorker.addEventListener('message', async event => {\n            let { type, project, path } = event.data || {};\n            if (type !== 'fetch' || wfThisProject !== project) return;\n            let port = event.ports?.[0];\n            if (!port) return;\n            let handler = ev => {\n              let data = ev.data || {};\n              if (data.type !== 'fetch:res' || data.project !== project || data.path !== path) return;\n              removeEventListener('message', handler);\n              port.postMessage(data);\n            };\n            addEventListener('message', handler);\n            parent.postMessage({ type: 'fetch', project, path }, wforigin);\n          });\n          let register = () => navigator.serviceWorker.controller.postMessage({ type:'webfoundry-register-tab', tabId });\n          navigator.serviceWorker.addEventListener('controllerchange', register);\n          register();\n          if (!location.pathname.startsWith('/preview/')) {\n            let path = parts.slice(3).join('/');\n            if (path !== 'index.html') {\n              let handler = async ev => {\n                let data = ev.data || {};\n                if (data.type !== 'fetch:res' || data.project !== wfThisProject || data.path !== path) return;\n                removeEventListener('message', handler);\n                document.open();\n                document.write(await data.data.text());\n                document.close();\n              };\n              addEventListener('message', handler);\n              parent.postMessage({ type: 'fetch', project: wfThisProject, path }, wforigin);\n              return;\n            }\n          }\n          await new Promise(pres => setTimeout(pres, 100));\n        }\n        if (location.pathname.includes('/files/')) return;\n        let [, md, mapp] = await Promise.all([\n          import(`${rootPrefix}/webfoundry/head.js`),\n          import(`${rootPrefix}/webfoundry/dominant.js`),\n          import(`${rootPrefix}/webfoundry/app.js`),\n        ]);\n        document.body.prepend(md.default.el(mapp.default));\n        parent.postMessage({ path: `pages/${location.pathname.slice(1).split('/').slice(3).join('/')}`, type: 'ready', status: 200 }, wforigin);\n      })();\n    </script>\n  \n\n</body></html>","pages/index.html":"<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title></title>\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1, maximum-scale=1\"\n    />\n    <script>\n      window.rootPrefix = /^\\/(files|preview)\\//.test(location.pathname)\n        ? location.pathname.split('/').slice(0, 4).join('/')\n        : '/';\n    </script>\n    <script type=\"module\" src=\"../webfoundry/ifdesigner.js\"></script>\n    <script src=\"../webfoundry/head.js\"></script>\n  </head>\n  <body\n    class=\"flex flex-col [&amp;&gt;div:first-child]:flex-1 min-h-screen\"\n    style=\"display: none\"\n  >\n    <div\n      wf-onattach=\"post('game.init')\"\n      class=\"flex flex-col items-center gap-6 w-full\"\n    >\n      <div class=\"flex justify-center items-center h-96 scale-150\">\n        <div class=\"grid grid-cols-11 relative\">\n          <div\n            class=\"w-[32px] h-[32px] bg-fit\"\n            style=\"background-image: url('../media/grass.png')\"\n          >\n            <img\n              class=\"aspect-square hidden absolute w-[32px] h-[32px]\"\n              wf-src=\"x.img()\"\n              wf-map=\"x of Object.values(state.game.objects)\"\n              wf-class=\"{{replaces hidden: 'block'}} {{`left-[${(Number(x.coords.split('x')[0]) - 1) * 32}px]`}} {{`top-[${(Number(x.coords.split('x')[1]) - 1) * 32}px]`}}\"\n            />\n          </div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit flex items-center justify-center\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit flex items-center justify-center\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit flex items-center justify-center\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          >\n            <img\n              class=\"absolute w-[32px] h-[32px]\"\n              src=\"../media/char.png\"\n              wf-class=\"{{`left-[${(state.game.char.x - 1) * 32}px]`}} {{`top-[${(state.game.char.y - 1) * 32}px]`}}\"\n            />\n          </div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n          <div\n            style=\"background-image: url('../media/grass.png')\"\n            class=\"w-[32px] h-[32px] bg-fit\"\n          ></div>\n        </div>\n      </div>\n      <div class=\"text-green-800 text-center\">{{state.game.log}}</div>\n    </div>\n  </body>\n</html>\n"}